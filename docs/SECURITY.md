# Политика Безопасности

Этот документ описывает основные меры безопасности, применяемые в проекте. Безопасность — наш главный приоритет.

## 1. Управление Секретами

**Правило №1: НИКОГДА не коммитьте секреты в Git!**

*   Все секретные данные (ключи API, токены, пароли от БД) должны храниться **исключительно** в файлах `.env`, которые находятся в соответствующих директориях (`backend/`, `bot/`).
*   Файл `.gitignore` в корне проекта настроен так, чтобы игнорировать все файлы с именем `.env`.
*   Для настройки проекта разработчики должны копировать `.env.example` в `.env` и заполнять его своими значениями.

## 2. Защита API

*   **Аутентификация**: Все эндпоинты, кроме `/api/auth/telegram`, должны быть защищены с помощью JWT (JSON Web Token). Middleware `auth.middleware.ts` проверяет валидность токена для каждого запроса.
*   **Авторизация**: Логика внутри сервисов должна проверять, имеет ли пользователь право на выполнение определенного действия (например, может ли пользователь получить доступ к чужой истории игр).
*   **Валидация входящих данных**: Все данные, приходящие от клиента (`req.body`, `req.params`, `req.query`), должны проходить строгую валидацию на бэкенде. Это защищает от инъекций и некорректных данных. Рекомендуется использовать библиотеки `zod` или `joi`.

## 3. Защита от распространенных уязвимостей (OWASP Top 10)

*   **SQL-инъекции**: Предотвращаются использованием ORM (например, Prisma) или параметризованных запросов. Никогда не конструируйте SQL-запросы с помощью конкатенации строк.
*   **Cross-Site Scripting (XSS)**: Современные фреймворки (React) по умолчанию экранируют выводимые данные, что минимизирует риск. Будьте осторожны при использовании `dangerouslySetInnerHTML`.
*   **CORS (Cross-Origin Resource Sharing)**: На бэкенде настроен CORS-middleware, который разрешает запросы только с доверенного домена фронтенда.

## 4. Безопасность зависимостей

*   Регулярно проверяйте зависимости на наличие известных уязвимостей с помощью `npm audit`.
*   Обновляйте зависимости своевременно, особенно при выходе патчей безопасности.